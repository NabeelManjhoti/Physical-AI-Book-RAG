# Data Model: URL Ingestion & Embedding Pipeline

## Overview
This document defines the data structures and relationships for the RAG content ingestion system.

## Core Entities

### Document Chunk
**Description**: Represents a segment of extracted text content with associated metadata
**Fields**:
- `id`: Unique identifier for the chunk (string, required)
- `content`: The actual text content (string, required)
- `source_url`: URL where the content was extracted from (string, required)
- `section_title`: Title of the section this chunk belongs to (string, optional)
- `position`: Position of this chunk within the original document (integer, required)
- `metadata`: Additional metadata about the chunk (dict, optional)

**Validation**:
- `id` must be unique within the system
- `content` must not be empty
- `source_url` must be a valid URL
- `position` must be non-negative

### Embedding Vector
**Description**: High-dimensional vector representation of text content generated by Cohere models
**Fields**:
- `vector_id`: Unique identifier for this vector (string, required)
- `vector`: The actual embedding vector (list of floats, required)
- `chunk_id`: Reference to the source document chunk (string, required)
- `model_name`: Name of the model used to generate the embedding (string, required)
- `created_at`: Timestamp when the embedding was created (datetime, required)

**Validation**:
- `vector_id` must be unique
- `vector` must have consistent dimensions
- `chunk_id` must reference an existing document chunk

### Vector Record
**Description**: Combination of embedding vector and metadata stored in Qdrant with unique identifier and searchable properties
**Fields**:
- `record_id`: Unique identifier for this record in Qdrant (string, required)
- `payload`: Contains the original document chunk and metadata (dict, required)
- `vector`: The embedding vector (list of floats, required)
- `collection_name`: Name of the Qdrant collection (string, required)

**Validation**:
- `record_id` must be unique within the collection
- `vector` dimensions must match collection configuration

## Relationships
- Document Chunk (1) → (0..n) Embedding Vector (one chunk can generate multiple embeddings if it's large)
- Embedding Vector (1) → (1) Vector Record (one-to-one relationship)

## State Transitions
- Document Chunk: NEW → PROCESSED → EMBEDDED → STORED
- Embedding Vector: CREATED → VALIDATED → INDEXED
- Vector Record: PREPARED → STORED → SEARCHABLE

## Data Flow
1. Document Chunk is created from crawled URL content
2. Embedding Vector is generated from Document Chunk using Cohere API
3. Vector Record is created combining embedding and metadata
4. Vector Record is stored in Qdrant for retrieval